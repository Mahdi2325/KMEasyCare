<!--社工服务记录-->

<div class="row">
    <div id="content" class="col-md-12">
        <div class="row">
            <div class="col-sm-12">
                <div class="page-header">
                    <ul class="breadcrumb">
                        <li>
                            <i class="fa fa-home"></i>
                            <a href="/">首页</a>
                        </li>
                        <li>新进住民环境适应及辅导记录</li>
                    </ul>
                    <div class="clearfix">

                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2">
                <div class="box border primary">
                    <div class="box-title">
                        <h4>
                            <i class="fa fa-bars">住民信息</i>
                        </h4>
                    </div>
                    <div class="box-body">
                        <resident-card feeno={{FeeNo}} callback="residentSelected(resident)" />
                    </div>
                </div>
            </div>
            <div class="col-md-10">
                <div class="box border primary">
                    <div class="box-title">
                        <h4>
                            <i class="fa fa-bars"></i>新进住民环境适应及辅导记录
                        </h4>
                    </div>
                    <div class="box-body">
                        <form class="form-horizontal" name="crForm" role="form" novalidate>

                            <div class="panel panel-default">
                                <div class="panel-heading">基本信息</div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label for="selRecordBy" class="col-sm-3 control-label">住民</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" ng-model="currentItem.Name" ng-disabled="true" />
                                            <input type="text" class="form-control" style="display:none" ng-model="currentItem.ID" />
                                            <input type="text" style="display:none" ng-model="currentItem.FEENO" />
                                            <input type="text" style="display:none" ng-model="currentItem.REGNO" />
                                        </div>

                                        <label for="dtRecDate" class="col-sm-2 control-label">入住日期</label>
                                        <div class="col-sm-4">
                                            <input type="text" class="form-control" ca-date-picker id="INDATE" ng-model="currentItem.INDATE" ng-change="checkINDATE()" ng-disabled="true">
                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <label for="dtRecDate" class="col-sm-3 control-label">社工辅导评估日期(第<select ng-model="currentItem.WEEK" required><option ng-repeat="option in availableOptions" value={{option}}>{{option}}</option></select>周)<span class="required">*</span></label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" ca-date-picker id="W1EVALDATE" ng-model="currentItem.W1EVALDATE" required ng-change="checkW1EVALDATE()">
                                        </div>
                                        <label class="col-sm-2 control-label">社工</label>
                                        <div class="col-sm-4">
                                            <input-staff id="txtRecordBy" callback="staffSelected(item)" value="{{currentItem.CREATEBY}}" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitContactor" class="col-sm-2 control-label">入住前被告知</label>
                                        <div class="col-sm-6">
                                            <label class="col-lg-offset-1   radio-inline"><input type="radio" value="1" name="INFORMFLAG" ng-model="currentItem.INFORMFLAG" />是</label>
                                            <label class="col-lg-offset-1   radio-inline"><input type="radio" value="0" name="INFORMFLAG" ng-model="currentItem.INFORMFLAG" />否</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitContactor" class="col-sm-2 control-label">入住前家属与长者经过沟通讨论</label>
                                        <div class="col-sm-6">
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="1" name="COMMFLAG" ng-model="currentItem.COMMFLAG" />是</label>
                                            <label class="col-lg-offset-1   radio-inline "><input type="radio" value="0" name="COMMFLAG" ng-model="currentItem.COMMFLAG" />否</label>
                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <label for="txtUnitContactor" class="col-sm-2 control-label">配合度</label>
                                        <div class="col-sm-6">
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="高" name="COORDINATION" ng-model="currentItem.COORDINATION" />高</label>
                                            <label class="col-lg-offset-1   radio-inline "><input type="radio" value="可" name="COORDINATION" ng-model="currentItem.COORDINATION" />可</label>
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="低" name="COORDINATION" ng-model="currentItem.COORDINATION" />低</label>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitContactor" class="col-sm-2 control-label">活动参与度</label>
                                        <div class="col-sm-6">
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="主动" name="PARTICIPATION" ng-model="currentItem.PARTICIPATION" />主动</label>
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="经鼓动邀请愿意参与" name="PARTICIPATION" ng-model="currentItem.PARTICIPATION" />经鼓动邀请愿意参与</label>
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="意愿低落" name="PARTICIPATION" ng-model="currentItem.PARTICIPATION" />意愿低落</label>
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="无法评估" name="PARTICIPATION" ng-model="currentItem.PARTICIPATION" />无法评估</label>
                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitContactor" class="col-sm-2 control-label">人际互动</label>
                                        <div class="col-sm-6">

                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="会主动问与答" name="INTERPERSONAL" ng-model="currentItem.INTERPERSONAL" />会主动问与答</label>
                                            <label class="col-lg-offset-1   radio-inline "><input type="radio" value="能被动回应他人" name="INTERPERSONAL" ng-model="currentItem.INTERPERSONAL" />能被动回应他人</label>
                                            <label class="col-lg-offset-1  radio-inline "><input type="radio" value="无回应" name="INTERPERSONAL" ng-model="currentItem.INTERPERSONAL" />无回应</label>

                                        </div>

                                    </div>

                                    <div class="form-group">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">情绪/行为表现</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control col-sm-8" ng-model="currentItem.EMOTION" id="EMOTION"  select-multiple-value="L03.012" />-->
                                            <input class="form-control col-sm-8" name="情绪/行为表现" type="text" id="EMOTION" ng-model="currentItem.EMOTION" select-items="环境适应-情绪行为表现" maxlength="200">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">阻力</label>
                                        <div class="col-sm-11">
                                            <input class="form-control col-sm-8" name="阻力" type="text" ng-model="currentItem.RESISTANCE" id="RESISTANCE" select-items="环境适应-阻力" maxlength="200">
                                            <!--<input type="text" class="form-control  col-sm-8" autocomplete="off" ng-model="currentItem.RESISTANCE" id="RESISTANCE"  select-multiple-value="L03.013" />-->
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">助力</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control  col-sm-8" autocomplete="off" ng-model="currentItem.HELP" id="HELP"  select-multiple-value="L03.014" />-->
                                            <input type="text" class="form-control  col-sm-8" name="助力" ng-model="currentItem.HELP" id="HELP" select-items="环境适应-助力" maxlength="200">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">处理措施</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control  col-sm-8" ng-model="currentItem.PROCESSACTIVITY" id="PROCESSACTIVITY"  select-multiple-value="L03.015" />-->
                                            <input type="text" class="form-control  col-sm-8" name="处理措施" ng-model="currentItem.PROCESSACTIVITY" id="PROCESSACTIVITY" select-items="环境适应-处理措施" maxlength="200">
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="panel panel-default">
                                <div class="panel-heading">{{titlename}}</div>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">追踪记录</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control " ng-model="currentItem.TRACEREC" id="TRACEREC2"  select-multiple-value="L03.016" />-->
                                            <input type="text" class="form-control  col-sm-8" name="追踪记录" ng-model="currentItem.TRACEREC" id="TRACEREC2" select-items="环境适应-追踪记录" maxlength="200">
                                        </div>

                                    </div>

                                    <div class="form-group" ng-show="currentItem.WEEK==1">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">追踪评估</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control " ng-model="currentItem.EVALUATION" id="W1EVALUATION" select-multiple-value="L03.017" />-->
                                            <input type="text" class="form-control  col-sm-8" name="追踪评估" ng-model="currentItem.EVALUATION" id="W1EVALUATION" select-items="追踪评估(第一周)" maxlength="200">
                                        </div>

                                    </div>
                                    <div class="form-group" ng-show="currentItem.WEEK==2">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">追踪评估</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control " ng-model="currentItem.EVALUATION" id="W2EVALUATION" select-multiple-value="L03.018" />-->
                                            <input type="text" class="form-control  col-sm-8" name="追踪评估" ng-model="currentItem.EVALUATION" id="W2EVALUATION" select-items="追踪评估(第二周)" maxlength="200">
                                        </div>

                                    </div>
                                    <div class="form-group" ng-show="currentItem.WEEK==3">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">追踪评估</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control " ng-model="currentItem.EVALUATION" id="W3EVALUATION" select-multiple-value="L03.019" />-->
                                            <input type="text" class="form-control  col-sm-8" name="追踪评估" ng-model="currentItem.EVALUATION" id="W3EVALUATION" select-items="追踪评估(第三周)" maxlength="200">
                                        </div>

                                    </div>
                                    <div class="form-group" ng-show="currentItem.WEEK>=4">
                                        <label for="txtUnitAddress" class="col-sm-1 control-label">追踪评估</label>
                                        <div class="col-sm-11">
                                            <!--<input type="text" class="form-control " ng-model="currentItem.EVALUATION" id="W4EVALUATION" select-multiple-value="L03.020" />-->
                                            <input type="text" class="form-control  col-sm-8" name="追踪评估" ng-model="currentItem.EVALUATION" id="W4EVALUATION" select-items="追踪评估(第四周)" maxlength="200">
                                        </div>

                                    </div>
                                    <div class="form-group">

                                        <div class="col-sm-offset-5">
                                            <div class="btn-group btn-group-sm" role="group" aria-label="...">
                                                <button class="btn btn-primary" ng-click="save(currentItem)" ng-disabled="crForm.$invalid">保存</button>&nbsp;
                                                <button type="button" class="btn btn-default" ng-click="resetData()">重置</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="box border primary">
                    <div class="box-title">
                        <h4><i class="fa fa-table"></i>历次记录</h4>
                    </div>
                    <div class="box-body">
                        <ui-data-table options="options">
                            <table id="tbEvalList" class="table table-striped table-bordered table-hover table-handler">

                                <thead>
                                    <tr>
                                        <th style="display:none" class="col-sm-1">ID</th>
                                        <th style="display:none" class="col-sm-1">FEENO</th>
                                        <th class="col-sm-1">住民</th>
                                        <th class="col-sm-1">入住日期</th>
                                        <th class="col-sm-2">社工辅导评估日期</th>
                                        <th class="col-sm-1">第几周</th>
                                        <th class="col-sm-1">入住前被告知</th>
                                        <th class="col-sm-1">社工</th>
                                        <th class="col-sm-2">人际互动</th>
                                        <th class="col-sm-1">配合度</th>

                                        <th class="col-sm-2"><i class="fa fa-bars"></i> 操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in Data.items">
                                        <td style="display:none">{{item.ID}}</td>
                                        <td style="display:none">{{item.FEENO}}</td>
                                        <td>{{Name}}</td>
                                        <td>{{item.INDATE | dateFormat}}</td>
                                        <td>{{item.W1EVALDATE | dateFormat}}</td>
                                        <td>{{item.WEEK}}</td>
                                        <td>{{(item.INFORMFLAG==1)?'是':(item.INFORMFLAG==0?'否':'')}}</td>
                                        <td>{{item.CREATEBY}}</td>
                                        <td>{{item.INTERPERSONAL}}</td>
                                        <td>{{item.COORDINATION}}</td>
                                        <!--<td>{{(item.INTERPERSONAL=="1")?"会主动问与答":(item.INTERPERSONAL=="2")?"能被动回应他人":(item.INTERPERSONAL=="3")?"无回应":""}}</td>
                                        <td>{{(item.COORDINATION=="1")?"高":(item.INTERPERSONAL=="2")?"可":(item.INTERPERSONAL=="3")?"低":""}}</td>-->

                                        <td>
                                            <div class="btn-group btn-group-xs" role="group" aria-label="...">
                                                <a class="btn btn-info" role="button" ng-click="rowSelect(item)"><i class="fa fa-pencil"></i>编辑</a>
                                                <a class="btn btn-primary" role="button" ng-click="Delete(item)"><i class="fa fa-times"></i>删除</a>
                                                <a class="btn btn-warning" role="button" ng-click="PrintPreview(item)"><i class="fa fa-print"></i>打印</a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                        </ui-data-table>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<script>
    $(".datepicker").datepicker({
        dateFormat: "yy-mm-dd",
        changeMonth: true,
        changeYear: true
    });
</script>


